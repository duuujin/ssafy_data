# Elasticsearch의 클러스터 및 노드 개념
- 클러스터
    - 하나 이상의 노드로 구성된그룹
    - 고유한 이름을 가지며, 데이터를 분산 저장하고 관리하는 역할을 수행
- 노드
    - 개별 실행 인스턴스를 노드라고 함
    - 데이터를 저장하며, 클러스터의 색인 및 검색 기능에 참여

# 클러스터
- 분산된 데이터 처리
- 노드의 역할과 관리
- 안정성과 가용성 확보
- 유연한 확장성과 성능 최적화

# 노드 유형
- 마스터 노드
- 데이터 노드
- 인제스트 노드
- 코디네이팅 노드

## 마스터 노드
    - 클러스터 관리 역할
    - 중요한 결정 수행
    - 연속적인 서비스 제공
    - 고가용성을 위한 다중 마스터 노드 구성
    - 클러스터 상태 모니터링 및 전환 관리

## 데이터 노드
    - 데이터 저장 및 관리
    - 색인 및 검색 처리
    - 안정적인 클러스터 운영
    - 유연한 구성 가능
    - 성능 및 비용 고려

## 인제스트 노드
    - 데이터 수집 및 사전 처리
    - 다양한 데이터 변환 지원
    - 데이터 노드로 색인 최적화
    - 리소스 분리 운영
    - 자동화 및 색인 지원

## 코디네이팅 노드
    - 클러스터의 요청을 라우팅하고 상태를 관리하는 역할
    - 검색 및 색인 요청을 적절한 데이터 노드로 분산하여 처리
    - 대규모 클러스터에서는 별도로 분리 운영하여 부하를 줄이는 것이 효과적
    - 이외에도 ml, remote_cluster_client, transform 노드 등도 존재

# 샤드
- 데이터를 나누어 저장하는 작은 단위, 노드 간 분산 저장을 통해 성능과 확장성을 보장
- Primary Shard
    - 색인 생성 및 CRUD 작업 수행
- Replica Shard
    - 기본 샤드의 복사본으로 장애 복구 및 검색 성능 향상 역할


# Replication
- 데이터를 복제하여 중복성 확보, 고가용성 및 장애 대응 보장
- 동작 방식
    - Primary-Replica 관계 : Primary Shard는 0개 이상의 Relica Shard를 가질 수 있음
    - 쓰기 연산 : Primary Shard에서 발생한 변경 사항이 모든 Relica Shard에 복제됨
    - 읽기 연산 : Primary와 Replica Shard가 함께 검색 부하를 분산하여 성능 향상
- 장점
    - 고가용성, 부하 분산, 데이터 중복 저장
- 고려사항
    - 노드 개수, 네트워크 및 저장소 부담, 트레이드 오프

# Elasticsearch 검색
- 클라이언트가 클러스터 내 아무 노드에 검색 요청(GET) 전송
- 해당 노드는 Coordinate Node로 동작
- 쿼리를 모든 관련 샤드에 전달
- Coordinate Node는 결과를 취합, 정렬, 필터링 등 후처리
- 최종 결과를 클라이언트에게 응답

